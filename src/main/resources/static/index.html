<!DOCTYPE html>
<html>
<head>
    <title>Todo App</title>

    <style>
        body{
            font-family: Arial;
            background: linear-gradient(135deg,#667eea,#764ba2);
            height:100vh;
            display:flex;
            justify-content:center;
            align-items:center;
        }

        .container{
            background:white;
            width:500px;
            padding:25px;
            border-radius:15px;
            box-shadow:0px 10px 30px rgba(0,0,0,0.2);
        }

        h2{
            text-align:center;
            color:#333;
        }

        .input-box{
            display:flex;
            gap:10px;
            margin-bottom:20px;
        }

        input{
            flex:1;
            padding:12px;
            border-radius:8px;
            border:1px solid #ccc;
            font-size:14px;
        }

        button{
            padding:12px 18px;
            border:none;
            border-radius:8px;
            background:#667eea;
            color:white;
            cursor:pointer;
            font-weight:bold;
            transition:0.3s;
        }

        button:hover{
            background:#5a67d8;
            transform:scale(1.05);
        }

        ul{
            list-style:none;
            padding:0;
        }

        li{
            background:#f4f4f4;
            margin-bottom:10px;
            padding:12px;
            border-radius:8px;
            display:flex;
            justify-content:space-between;
            align-items:center;
        }

        .delete{
            background:#ff4d4d;
        }

        .delete:hover{
            background:#e60000;
        }
    </style>

</head>

<body>

<div class="container">
    <h2> Todo App</h2>

    <div class="input-box">
        <input type="text" id="title" placeholder="Title">
        <input type="text" id="desc" placeholder="Description">
        <button onclick="addTodo()">Add</button>
    </div>

    <h3>All Todos</h3>
    <ul id="list"></ul>
</div>

<script>
    const api="http://localhost:9090/todo";

    // add todo
    function addTodo(){
        let title=document.getElementById("title").value;
        let description=document.getElementById("desc").value;

        fetch(api+"/add",{
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body:JSON.stringify({title,description})
        })
        .then(res=>res.json())
        .then(()=>{
            getTodos();
            document.getElementById("title").value="";
            document.getElementById("desc").value="";
        });
    }

    // get todos
    function getTodos(){
     fetch(api+"/all")
     .then(res=>res.json())
     .then(data=>{
        let list=document.getElementById("list");
        list.innerHTML="";

        data.forEach(t=>{
            list.innerHTML+=`
            <li>
            <span>${t.title} - ${t.description}</span>
            <button class="delete" onclick="deleteTodo('${t.id}')">Delete</button>
            </li>`;
        })
     })
    }

    // delete
    function deleteTodo(id){
     fetch(api+"/delete/"+id,{method:"DELETE"})
     .then(()=>getTodos());
    }

    getTodos();
</script>

</body>
</html>
